<?php
session_start();
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cubism Learning Gallery</title>
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script src="https://unpkg.com/isotope-layout@3/dist/isotope.pkgd.js" type="text/javascript"></script>
    <script src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.js" type="text/javascript"></script>

    <link rel="stylesheet" href="https://s2250677.edinburgh.domains/DWDWebsite2/css/site.css">
    <link rel="stylesheet" href="https://s2250677.edinburgh.domains/DWDWebsite2/css/navBar.css">
    <link rel="stylesheet" href="https://s2250677.edinburgh.domains/DWDWebsite2/css/cubismGallery.css">
    <link rel="stylesheet" href="https://s2250677.edinburgh.domains/DWDWebsite2/css/slideshow.css">
    <link rel="stylesheet" href="https://s2250677.edinburgh.domains/DWDWebsite2/css/modal.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css"/>
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Rammetto+One" />
    <style>
        .galleryArray{
            background-color: #DBCEBA;
            top: 9.81vh;
            right: 0vh;
            bottom: 0;
            padding: 0px;
            position: absolute;
            text-align: center;
            font-family: "Rammetto One", sans-serif;
            width:100%;

        }

        .galleryArray h2{
            color: #1c1c1c;
            font-size: 4vh;
        }

        .galleryArray h3{
            color: #DBCEBA;
            font-size:2.3vh;
        }

        .myImg{
            transition: transform .2s; /* Animation */
        }
        .myImg:hover {
            transform: scale(1.02);
        }

        .info{
            display:none;
        }

        .logo{
            position: fixed;
            left: 1.8vw;
            top: 3.15vh;
            max-height: 100%;
            max-width: 100%;
            height: 4.5vh;
            z-index: 1001;
        }

        .icon{
            position: fixed;
            right: 4vh;
            z-index: 1001;
            top:2.8vh;
        }

        .greetUser{
            position: fixed;
            right: 11vh;
            z-index: 1001;
            top: 1.6vh;
            color:white;
            font-family: Tahoma, Arial, sans-serif;
        }
    </style>
</head>
<body>

<a href="{{ @BASE }}/"><img class = "logo" src="{{ @BASE }}/images/logov2white.png" alt="logo"></a>

<p class = "greetUser">{{ @username }} </p>
<a href = "https://s2250677.edinburgh.domains/DWDWebsite2/ui/userProfile.php" class = "icon"> <i class="fas fa-user fa-2x" style="color:white"></i> </a>


<!-- navigation bar -->
<nav>
    <ul>
        <li><a href="{{ @BASE }}/learn"> Learn </a></li>
        <li class="create"><a href="{{ @BASE }}/canvas"> Create</a>
            <ul class="dropdown">
                <li class = "dditem"><a href="{{ @BASE }}/style-transfer"> Style Transfer</a></li>
                <li class = "dditem"><a href="{{ @BASE }}/canvas">Canvas</a></li>
            </ul>
        </li>
        <li class="create"><a href="{{ @BASE }}/masterGallery">Galleries</a>
            <ul class="dropdown">
                <li class = "dditem"><a href="{{ @BASE }}/masterGallery">Masters' Gallery</a></li>
                <li class = "dditem"><a href="{{ @BASE }}/userGallery">Community Gallery</a></li>
            </ul>
        </li>
        <!--<li><a href="{{ @BASE }}/userGallery">Community</a></li> -->
    </ul>
</nav>

<!-- Styling made possible by https://isotope.metafizzy.co/ */ -->
<section class = "galleryArray">
    <h2> Gallery </h2>

    <div class="button-group sort-by-button-group">
        <button id = "first" class="button is-checked" data-sort-value="original-order">Default</button>
        <button class="button" data-sort-value="artName">Artwork Name (A-Z)</button>
        <button class="button" data-sort-value="artDesc">Artist Surname (A-Z)</button>
        <button class="button" data-sort-value="artDate">Chronological</button>
    </div>

    <div class="grid">
        <div class="grid-sizer"></div>
        <div class="grid-item">
            <img src="https://s2250677.edinburgh.domains/DWDWebsite2/images/gueridon.jpg" alt = "Grande nature morte au gueridon, Pablo Picasso (c. 1931)" class = "myImg" role="button" onclick = "showInfo(this)" />
            <div class = "info">
                <h3 class="artName">Grande</h3>
                <p class="artDesc">Picasso </p>
                <p class="artDate">1931 </p>
            </div>
        </div>
        <div class="grid-item">
            <img src="https://s2250677.edinburgh.domains/DWDWebsite2/images/fresnaye.jpg" alt = "Sitting Man, Roger de La Fresnaye (c. 1914)" class = "myImg" role="button" onclick = "showInfo(this)"  />
            <div class="info">
                <h3 class="artName">Sitting</h3>
                <br><br>
                <p class="artDesc">De </p>
                <p class="artDate">1914</p>
            </div>
        </div>
        <div class="grid-item">
            <img src="https://s2250677.edinburgh.domains/DWDWebsite2/images/picassoportrait.jpg" alt = "Portrait of Pablo Picasso, Juan Gris (c. 1912)" class = "myImg" role="button" onclick = "showInfo(this)"/>
            <div class="info">
                <h3 class="artName">Portrait</h3>
                <br><br>
                <p class="artDesc">Gris</p>
                <p class="artDate">1912</p>
            </div>
        </div>
        <div class="grid-item">
            <img src="https://s2250677.edinburgh.domains/DWDWebsite2/images/Niemann.jpg" alt = "Tapestries of Desire, Hennie Niemann (c. 2019)" class = "myImg" role="button" onclick = "showInfo(this)" />
            <div class="info">
                <h3 class="artName">Tapestries</h3>
                <br><br>
                <p class="artDesc">Niemann</p>
                <p class="artDate">2019</p>
            </div>
        </div>
        <div class="grid-item">
            <img src="https://s2250677.edinburgh.domains/DWDWebsite2/images/cezanne.jpeg" alt = "The Gardener Vallier, Paul Cézanne (c. 1906)" class = "myImg" role="button" onclick = "showInfo(this)" />
            <div class="info">
                <h3 class="artName">Gardener</h3>
                <br><br>
                <p class="artDesc">Cézanne</p>
                <p class="artDate">1906</p>
            </div>
        </div>
        <div class="grid-item">
            <img src="https://s2250677.edinburgh.domains/DWDWebsite2/images/streetpavers.jpg" alt = "The Street Pavers, Umberto Boccioni (c. 1914)" class = "myImg" role="button" onclick = "showInfo(this)" />
            <div class="info">
                <h3 class="artName">Street</h3>
                <p class="artDesc">Boccioni</p>
                <p class="artDate">1914</p>
            </div>
        </div>
        <div class="grid-item">
            <img src="https://s2250677.edinburgh.domains/DWDWebsite2/images/marcoussis2.jpg" alt = "Composition cubiste, poisson et clair de lune, Louis Marcoussis (c. 1926)" class = "myImg" role="button" onclick = "showInfo(this)"/>
            <div class="info">
                <h3 class="artName">Composition </h3>
                <p class="artDesc">Marcoussis</p>
                <p class="artDate">1926</p>
            </div>
        </div>
        <div class="grid-item">
            <img src="https://s2250677.edinburgh.domains/DWDWebsite2/images/marcoussis.jpeg" alt = "Still Life, Louis Marcoussis (c. 1927)" class = "myImg" role="button" onclick = "showInfo(this)"/>
            <div class="info">
                <h3 class="artName">Still</h3>
                <br>
                <p class="artDesc">Marcoussis</p>
                <br>
                <p class="artDate">1927</p>
            </div>
        </div>
        <div class="grid-item">
            <img src="https://s2250677.edinburgh.domains/DWDWebsite2/images/segal.jpeg" alt = "Hafen, La Ciotat, Arthur Segal (c. 1928)" class = "myImg" role="button" onclick = "showInfo(this)"/>
            <div class="info">
                <h3 class="artName">Hafen</h3>
                <br>
                <p class="artDesc">Segal</p>
                <br>
                <p class="artDate">1928</p>
            </div>
        </div>
        <div class="grid-item">
            <img src="https://s2250677.edinburgh.domains/DWDWebsite2/images/hartley.jpg" alt = "Portrait of a German Officer, Marsden Hartley (c. 1914)" class = "myImg" role="button" onclick = "showInfo(this)" />
            <div class="info">
                <h3 class="artName">Portrait</h3>
                <br>
                <p class="artDesc">Hartley</p>
                <p class="artDate">1914</p>
            </div>
        </div>
        <div class="grid-item">
            <img src="https://s2250677.edinburgh.domains/DWDWebsite2/images/cat.jpg" alt = "Cassie Thinking About Cubism, Philip Absolon (c. 2008)" class = "myImg" role="button" onclick = "showInfo(this)"/>
            <div class="info">
                <h3 class="artName">Cassie</h3>
                <br><br>
                <p class="artDesc">Absolon</p>
                <br><br>
                <p class="artDate">2008</p>
            </div>
        </div>
        <div class="grid-item">
            <img src="https://s2250677.edinburgh.domains/DWDWebsite2/images/metzinger.jpg" alt = "Fruit and a Jug on a Table, Jean Metzinger (c. 1916)" class = "myImg" role="button" onclick = "showInfo(this)"/>
            <div class="info">
                <h3 class="artName">Fruit</h3>
                <br><br>
                <p class="artDesc">Metzinger </p>
                <p class="artDate">1916</p>
            </div>
        </div>

    </div>

</section>

<!-- The Modal -->
<div id="myModal" class="modal">
    <span class="close">&times;</span>
    <img class="modal-content" id="img01">
    <div id="caption"></div>
</div>


<script type = "text/javascript">
    /* Styling made possible by https://isotope.metafizzy.co/ */
    // external js: isotope.pkgd.js, imagesloaded.pkgd.js

    // init Isotope after all images have loaded
    const $grid = $('.grid').imagesLoaded(function () {
        $grid.isotope({
            itemSelector: '.grid-item',
            percentPosition: true,
            layoutMode: 'masonry',
            masonry: {
                columnWidth: '.grid-sizer'
            },
            getSortData: {
                artName: '.artName',
                artDesc: '.artDesc',
                artDate: '.artDate parseInt'}
        });
    });


    /* From: https://codepen.io/mikun/pen/YWgqEX */
    $('.slide-nav').on('click', function(e) {
        async: false;
        e.preventDefault();
        // get current slide
        var current = $('.flex--active').data('slide'),
            // get button data-slide
            next = $(this).data('slide');

        $('.slide-nav').removeClass('active');
        $(this).addClass('active');

        if (current === next) {
            return false;
        } else {
            $('.slider__wrapper').find('.flex__container[data-slide=' + next + ']').addClass('flex--preStart');
            $('.flex--active').addClass('animate--end');
            setTimeout(function() {
                $('.flex--preStart').removeClass('animate--start flex--preStart').addClass('flex--active');
                $('.animate--end').addClass('animate--start').removeClass('animate--end flex--active');
            }, 800);
        }
    });

    //display modal
    function showInfo(t) {
        // Get the modal
        const modal = document.getElementById("myModal");

        // Get the image and insert it inside the modal - use its "alt" text as a caption
        const img = document.getElementsByClassName("myImg");
        const modalImg = document.getElementById("img01");
        const captionText = document.getElementById("caption");
        console.log("clicked");
        modal.style.display = "block";
        modalImg.src = t.src;
        captionText.innerHTML = t.alt;

        // Get the <span> element that closes the modal
        const span = document.getElementsByClassName("close")[0];

        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
            modal.style.display = "none";
        }
    }

    // external js: isotope.pkgd.js

    // bind sort button click
    $('.sort-by-button-group').on( 'click', 'button', function() {
        var sortValue = $(this).attr('data-sort-value');
        $grid.isotope({ sortBy: sortValue });
    });

    // change is-checked class on buttons
    $('.button-group').each( function( i, buttonGroup ) {
        var $buttonGroup = $( buttonGroup );
        $buttonGroup.on( 'click', 'button', function() {
            $buttonGroup.find('.is-checked').removeClass('is-checked');
            $( this ).addClass('is-checked');
        });
    });



</script>
</body>
</html>